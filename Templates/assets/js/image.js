function getCompressedBase64(e){return JSON.parse(document.getElementById("screenshot-data").textContent)[e]||""}function decodeBase64(e){let t=e.replace(/\s+/g,"").replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;n&&(t+="=".repeat(4-n));const o=atob(t),l=new Uint8Array(o.length);for(let e=0;e<o.length;e++)l[e]=o.charCodeAt(e);return l}function inflateToBlobUrl(e){const t=pako.inflateRaw(e),n=new Blob([t],{type:"image/png"});return URL.createObjectURL(n)}function toggleThumbnail(e){const t=document.getElementById(`thumbContainer${e}`),n=document.getElementById(`thumbImg${e}`),o=document.getElementById(`btnIcon${e}`),l=document.getElementById(`tooltipLabel${e}`);if("none"===t.style.display){if(t.style.display="block",!n.src){const e=decodeBase64(getCompressedBase64(t.dataset.compressed));n.src=inflateToBlobUrl(e),n.onload=()=>n.classList.add("loaded")}o.textContent="#",l.textContent="Hide Screenshot"}else t.style.display="none",o.textContent="⧉",l.textContent="Open Screenshot"}function openFullImage(e,t,n){const o=document.getElementById(`thumbImg${n}`),l=document.getElementById(e);document.getElementById(t).src=o.src,l.style.display="block"}function closeModal(e,t){const n=document.getElementById(e),o=document.getElementById(`thumbContainer${t}`),l=document.getElementById(`btnIcon${t}`),c=document.getElementById(`tooltipLabel${t}`);n.style.display="none",o.style.display="none",l.textContent="⧉",c.textContent="Open Screenshot"}document.addEventListener("keydown",(function(e){if("Escape"===e.key){document.querySelectorAll('[id^="imageModal"]').forEach((e=>{if("block"===e.style.display){const t=e.id,n=t.replace("imageModal","");closeModal(t,parseInt(n))}}))}}));